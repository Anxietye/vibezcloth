{% extends "base.html" %}

{% block content %}
<div class="container">
    {% include 'partials/breadcrumbs.html' %}

    <!-- NUEVO LAYOUT DE PÁGINA DE PRODUCTO -->
    <div class="product-detail-page">

        <!-- COLUMNA IZQUIERDA: INFORMACIÓN -->
        <div class="product-info-column">
            <h1>{{ product.name }}</h1>
            <p class="price">{{ product.price }}</p>
            <p class="meta">SKU: {{ product.sku }}<br>Category: {{ product.category.capitalize() }}</p>
            <p class="description">{{ product.description }}</p>

            <!-- Selectores de opciones -->
            <div class="option-selector">
                <label>Color:</label>
                <div class="options">
                    <button class="active">Black</button> <button>White</button> <button>Blue</button>
                </div>
            </div>
            <div class="option-selector">
                <label>Size:</label>
                <div class="options">
                    <button>S</button> <button class="active">M</button> <button>L</button>
                </div>
            </div>

            <!-- Selector de cantidad y botón de compra -->
            <div class="purchase-actions">
                <div class="quantity-selector">
                    <button>-</button>
                    <input type="text" value="1">
                    <button>+</button>
                </div>
                <button class="purchase-button" id="add-to-cart-btn" data-product-id="{{ product.id }}">ADD TO
                    CART</button>
            </div>

            <a href="#" class="wishlist-link"><i class="fa-regular fa-heart"></i> Add to Wishlist</a>
        </div>

        <!-- COLUMNA DERECHA: GALERÍA DE IMÁGENES -->
        <div class="product-gallery-column">
            <div class="main-product-image">
                <!-- CAMBIO 1: Añadimos un ID a la imagen principal -->
                <img src="{{ url_for('static', filename=product.image) }}" alt="{{ product.name }}"
                    id="main-product-image">
            </div>
            <div class="product-thumbnails">
                {% for img_path in product.gallery_images %}
                <!-- CAMBIO 2: Añadimos una clase a cada miniatura y marcamos la primera como activa -->
                <img class="thumbnail-img {{ 'active' if loop.first }}" src="{{ url_for('static', filename=img_path) }}"
                    alt="Thumbnail of {{ product.name }}">
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}